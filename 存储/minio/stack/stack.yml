version: "3"

networks:
  sm-net:
    external: true

services:
  minio:
    image: minio/minio
    command: server /data{1...4}
    environment:
    - MINIO_ROOT_USER=minioadmin
    - MINIO_ROOT_PASSWORD=minioadmin
    volumes:
    - /opt/minio/data:/data
    - /opt/minio/data2:/data2
    - /opt/minio/data3:/data3
    - /opt/minio/data4:/data4
    ports:
    - 9000:9000
    networks:
    - sm-net
    deploy:
      mode: replicated
      replicas: 1
#      resources:
#        limits:
#          memory: 1g
#      placement:
#        constraints:
#        - node.labels.rabbit1 == 1
#        - node.role == manager


